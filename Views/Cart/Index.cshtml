@model Asp_Web_Lib.ViewModels.CartViewModel
<main>
<h2>Koszyk</h2>

@if (Model.TotalItems == 0)
{
    <p>Twój koszyk jest pusty.</p>
}
else
{
	<div class="table-container">
		<table class="table">
			<thead class="header">
			<tr>
				<th>Okładka</th>
				<th>Tytuł</th>
				<th>Dostępne egzemplarze</th>
				<th>Akcje</th>
			</tr>
			</thead>
			<tbody>
			@foreach (var item in Model.Items)
			{
				<tr class="content">
					<td>
						@if (!string.IsNullOrEmpty(item.CoverImage))
						{
							<a href="@Url.Action("Details", "Books", new { id = item.BookId })"> <img src="@Url.Content(item.CoverImage)" alt="@item.Title" style="max-width: 100px; max-height: 150px;" /> </a>
						}
						else
						{
							<span>Brak okładki</span>
						}
					</td>
					<td>@item.Title</td>
					<td>@item.AvailableCopies</td>
					<td class="link-container">
                        <div class="action-buttons">
                            @if (!item.IsAvailable)
                            {
                                if (item.CanJoinQueue)
                                {
	                                <form action="@Url.Action("Reserve", "Cart", new { bookId = item.BookId })" method="post">
                                        <button class="table-button" type="submit">
                                            Dołącz do kolejki
                                        </button>
	                                </form>
                                }
                            }
                            else
                            {
                                if (item.IsAvailable)
                                {
	                                <form action="@Url.Action("Reserve", "Cart", new { bookId = item.BookId })" method="post">
		                                <button class="table-button" type="submit">
			                                Wypożycz
		                                </button>
	                                </form>
                                }
                            }

                            <form action="@Url.Action("Remove", "Cart")" method="post" class="">
                                @Html.AntiForgeryToken()
                                <input type="hidden" name="bookId" value="@item.BookId" />
                                <button type="submit" class="table-button">Usuń</button>
                            </form>

                        </div>
					</td>
				</tr>
			}
			</tbody>
		</table>
	</div>
}
</main>
<style>
	.table-co {
		width: 2;
	}
</style>

@Styles.Render("~/Content/Styles/ModelPanel.css")
